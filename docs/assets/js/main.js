"use strict";const inputSearch=document.querySelector(".js-inputSearch"),inputBtnSearch=document.querySelector(".js-inputBtnSearch"),inputBtnReset=document.querySelector(".js-inputBtnReset"),seriesListHTML=document.querySelector(".js-seriesList"),favoriteList=document.querySelector(".js-seriesFavourite");let show=[],favorite=[];function getAPI(){return"//api.tvmaze.com/search/shows?q="+inputSearch.value}function searchSeries(){let e=getAPI();fetch(e).then(e=>e.json()).then(e=>{show=e,handleFilter()})}function handleFilter(){paintListSeries()}function paintListSeries(){seriesListHTML.innerHTML="";for(const e of show){const s=e.show.name,i=e.show.image,t=e.show.id,n="https://via.placeholder.com/210x295/ffffff/666666/?text=TV%27";if(null===i){const e=`<li class="elementListSeries js-seriesTitle" id=${t}>\n          <div class="seriesDiv">\n            <h2 class="titleSeries">${s}</h2>\n            <img class="img  js-seriesImg" src=${n} alt${s}>\n          </div>\n        </li>`;seriesListHTML.innerHTML+=e}else{const i=`<li class="elementListSeries js-seriesTitle" id=${t}>\n          <div class="seriesDiv js-seriesDivClick">\n            <h2 class="titleSeries">${s}</h2>\n            <img class="img js-seriesImg" src=${e.show.image.medium} alt${s}>\n          </div>\n        </li>`;seriesListHTML.innerHTML+=i}}listenLiSeries()}function listenLiSeries(){const e=document.querySelectorAll(".js-seriesTitle");for(const s of e)s.addEventListener("click",handleSeries)}function handleSeries(e){const s=parseInt(e.currentTarget.id),i=show.find(e=>e.show.id===s),t=favorite.findIndex(e=>e.show.id===s);-1===t?favorite.push(i):favorite.splice(t,1),e.currentTarget.classList.toggle("seriesDivClick"),paintFavouriteSeries()}function paintFavouriteSeries(){favoriteList.innerHTML="";for(const e of favorite){const s=e.show.name,i=e.show.image,t=e.show.id,n="https://via.placeholder.com/210x295/ffffff/666666/?text=TV%27";if(null===i){const e=`<li class="elementListSeriesFav" id=${t}>\n        <div class="seriesDivFav js-seriesDivClick">\n          <h2 class="titleSeriesFav">${s}</h2>\n          <img class="imgFav  js-seriesImg" src=${n} alt${s}>\n          <form class=""js-formFavReset">\n          <input type="button" class="buttonResetFav js-ButtonResetFav" value='X'>\n          </form>\n        </div>\n      </li>`;favoriteList.innerHTML+=e}else{const i=`<li class="elementListSeriesFav" id=${t}>\n         <div class="seriesDivFav js-seriesDivClick">\n           <h2 class="titleSeriesFav">${s}</h2>\n           <img class="imgFav js-seriesImg" src=${e.show.image.medium} alt${s}>\n           <form class="js-formfavReset">\n           <input type="button" class="buttonResetFav" value='X'>\n           </form>\n         </div>\n       </li>`;favoriteList.innerHTML+=i}}}function handleClickSearch(e){e.preventDefault,searchSeries(),setLocalStorage()}function handleClickReset(e){e.preventDefault(),favorite=[],paintFavouriteSeries()}function setLocalStorage(){const e=JSON.stringify(favorite);localStorage.setItem("favorite",e)}function getLocalStorage(){let e=localStorage.getItem("favorite");if(null===e)handleClickSearch();else{const s=JSON.parse(e);favorite=s,paintFavouriteSeries()}}inputSearch.addEventListener("keyUp",handleFilter),getLocalStorage(),inputBtnSearch.addEventListener("click",handleClickSearch),inputBtnReset.addEventListener("click",handleClickReset);